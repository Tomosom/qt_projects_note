# 基础图形绘制
- 综合实例开发：简易绘图程序
    - 功能需求：
        - 自甶图形绘制
        - 基本图形绘制（直线，矩形，椭圆）
        - 能够选择图形绘制颜色

- 简易绘图程序运行截图
    ![](_v_images_/.png)

- 界面解决方案
    1. 以QWidget为基类创建绘图主窗口
    2. 使用QGroupBox创建图开彡设置区域
    3. 使用单选按钮QRadioBox实现目标图形的选择
    4. 使用组合框QCombox实现绘图颜色的选择

# 实例分析 绘图程序界面

- 问题
    如何实现自由绘图？

- 分析
    自由绘图的本质是跟踪鼠标的移动轨迹；因此, 必须考虑什么时候开始？什么时候结束？如何记录鼠标移动？

- 提示一
    从绘图参数的角度，可以将已经绘制结束的图形与正桓会制的图形分开处理。

- 提示二
    自由绘图必须记录鼠标移动时经过的所有点坐标；因此，绘图参数必须有能力保存多个坐标值。

- 自甶绘图解决方案
    1. 以鼠标按下为开始，记录幵始坐标
        • mousePressEvent
    2. 记录鼠标移动时经过的像素坐标
        • mouseMoveEvent
    3. 以鼠标释放为结束，记录结束坐标
        • mouseReleaseEvent
    4. 按照记录顺序在俩俩坐标之间绘制直线
        • paintEvent

# 编程实验 自由图形绘制

- 问题
    如何实现基础图形动态绘制？

- 分析
    基础图形的目标是固定的，但是开始点与结束克的不同会导致最终形状的差异；因此，鼠标移动时根据当前坐标实时绘图，鼠标松开时确定最终图形。

- 提示三
    基本图形绘制需要在鼠标按下并移动时进行动态绘图；但是，无论何时都只需要记录两个坐标值。

- 基础图形绘制解决方案
    1. 以鼠标按下为开始，记录开始坐标
        • mousePressEvent
    2. 将鼠标移动时经过的每个坐标作为临时结束坐标
        • mouseMoveEvent
    3. 以鼠标释放为结束，确定最终结束坐标
        • mouseReleaseEvent
    4. 在开始坐标和结束坐标之间绘制目标图形
        • paintEvent

# 编程实验 基础图形绘制

# 小结
- 绘图程序需要重写鼠标事件处理函数
- 模型视图的思想适用于绘图程序
- 所有图形的绘制由 paintEvent 函数完成
- 工程中需要避免在绘制时进行浮点运算

