# 深入浅出信号与槽
- 一个事实
    在实际的项目开发中，大多数时候是盲接将组件中预定义的信号连接到槽函数；信号发射的时槽函数被调用。

- 深度的思考
    信号是怎么来的？又是如何发射的？

- Qt中信号 (SIGNAL) 的本质
    - 信号只是一个特殊的成员函数声明
        - 函数的返回值是void类型
        - 函数只能声明不能定义
    - 信号必须使用signals关键字进行声明
        - 函数的访问属，往自动被置为protected
        - 只能通过emit关键字调用函数（发射信号）

- 信号定义示例

```c
class Test: public QObject //只有Qt类才能定义信号
{
    Q_OBJECT                //必须使用宏Q_〇BJECT

signals:   //使用signals声明信号函數, 访问级别为protected
    void testSignal(int v); //信号只能声明不能定义

public:
    void test(int i)
    {
        emit testSignal(i); //通过emit发射信号
    }
};
```

# 编程实验 自定义信号

- 信号与槽的对应关系
    ![](_v_images_/.png)

- 信号与槽的对应关系
    - 一个信号可以连接到多个槽（一对多）
    - 多个信号可以连接到一^槽（多对一）
    - 一个信号可以连接到另一个信号（转嫁）
    - 连接可以被disconnect函数删除（移除）

# 编程实验 信号与槽的对应关系

- 不可忽视的军规
    1. Qt类只能在头文件中声明
    2. 信号与槽的原型应该完全相同
    3. 信号参数多于槽参数时，多于的参数被忽略
    4. 槽函数的返回值必须是void类型
    5. 槽函数可以像普通成员函数一样被调用
    6. 信号与槽的访问属性对于 connect/disconnect 无效

- 信号与槽的意义
    - 最大限度的弱化了类之间的耦合关系
    - 在设计阶段，可以减少不必要的接口类（抽象类）
    - 在开发阶段，对象间的交互通过信号与槽动态绑定

# 小结
- 信号只是一个特殊的成员函数声明
- 信号必须使用 signals 关键字进行声明
- 信号与槽的可以存在多种对应关系
- 信号与槽机制使得类间关系松散，提高类的可复用性

