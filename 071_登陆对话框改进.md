# 登陆对话框的改进
- 第一个版本的登录对话框
    ![](_v_images_/.png)
    问题：
    没有实现验证码功能，容易被恶意程序攻击，盗取用户名和密码。

- 改进思路 - 验证码机制
    1. 随机产生獅码
    2. 用户识别后填写
    3. 判断用户识别的正确性
    需求：
    验证码必须能够有效避开恶意程序的识别 !

- 关于验证码和恶意程序
    - 自动测试原理
        - 利用一些特殊的系统函数能够通过代码控制程序，从而模拟用户操作
    - 恶意程序
        - 使用自动测试原理对目标程序进行控制，从而盗取信息或进行攻击
    - 验证码
        - 随机产生，用户容易识别，程序难以识别，从而有效避免恶意攻击

- 需要注意的问题
    - 验证码必须动态随机产生
    - 验证码的显示避开使用标准组件（标签，文本框，等）
    - 验证码应该附带足够多的障碍增加程序识别难度

- 解决方案
    1. 随机产生目标验证码
    2. 将验证码直接绘制于登录对话框
    3. 验证码中的字符颜色随机改变
    4. 在验证码区域随机绘制噪点

# 编程实验 绘制验证码区域

- 关于随机数
    - 计算机无法产生真正意义上的随机数
    - 计算机只能模拟随机数序列（伪随机数）
    - 随机种子决定每次产生的随机序列是否相同

    ```c
    qsrand(seed); //设置随机数种子
    int n = qrand() % 100; // 生成[0, 99]之间的随机数
    ```

- 随机产生验证码
    ```c
    QString getCaptcha()
    {
        QString ret = "";
        for(int i=0; i<4; i++)
        {
            int c = (qrand() % 2) ? 'a' : 'A';
            ret += static_cast<QChar>(c + qrand() % 26);
        }
        return ret;
    }
    ```

- 验证码绘制
    ![](_v_images_/.png)
    注意:
    验证码中的每一个字符必须分开绘制。

# 编程实验 随机验证码

# 小结
- 验证码用于有效避免恶意程序的破坏
- 验证码的产生需要随机数的支持
- 验证码必须附带有效噪点
- 使用文本绘制的方式显示验证码
- 每一个验证码的字符需要独立绘制
