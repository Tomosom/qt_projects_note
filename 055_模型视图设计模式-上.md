# 模型视图设计模式

- 模型视图设计模式的核心思想
    - 模型（数据）与视图（显示）相分离
    - 模型对外提供标准接口存取数据（不关心数据如何显示)
    - 视图自定义数据的显示方式（不关系数据如何组织存储)

- 模型视图模式的直观理解
    ![](_v_images_/.png)

- 模型视图模式的工作机制
    - 当数据发生改变时
        - 模型发出信号通知视图
    - 当用户与视图进行交互时
        - 视图发出信号提供交互信息

- Qt中的模型类层次结构
    ![](_v_images_/.png)

- Qt中的视图类层次结构
    ![](_v_images_/.png)

- 关键技术问题：
    - 模型如何为数据提供统一的访问方式？
    - 深入理解：
        在Qt中，不管模型以什么结构组织数据，都必须为每个数据提供独一无二的索引；视图通过索引防问模型中的具体数据.

- 模型视图编程示例

```c
QFileSystemModel fsModel; /* 定义文件系统模型 */
QTreeView treeView; /*定义树形显示视图*/
QString path = QDir: : currentPath () ; /* 当前工作目录 */

fsModel.setRootPath(path) ;   /*从当前工作目录中取数据*/
treeView.setModel(&fsModel) ; /* 连接模型与视图 */

/* 设置树形视图的数据索引 */
/* 从树形视图的根部开始显示工作目录中的内容 */
treeView.setRootlndex(fsModel.index(path));
```

# 编程实验 模型视图结构的初探

# 小结
- Qt中内置的支持了模型视图的开发方式
- 模型用于组织数据源，不关心数据的显示方式
- 视图用于定义数据的显示方式，不关心数据的组织方式
- Qt中的模型必须为每一个数据提供独一无二的索引
- Qt中的视图通过索引访问模型中的数据
