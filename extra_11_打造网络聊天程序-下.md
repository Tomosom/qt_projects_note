# 打造网络聊天程序（下)
- 问题
    如何设计客户端和服务端之间的消息交互流程?

- 消息类型分析
    - 控制消息：
        - 与聊天内容无关，涉及用户状态
        - 连接，断开，踢人，禁言，等
    - 文本消息
        - 与聊天内容相关，用户可见消息
        - 公聊消息，私聊消息

- 文本消息传输模型（公聊模式)
    ![](_v_images_/.png)

- 文本消息传输模型（私聊模式)
    ![](_v_images_/.png)

-  用户登录/注册流程
    ![](_v_images_/.png)

-  服务端认证流程
    ![](_v_images_/.png)

- 简化设计
    - 为了重点突出基于 TCP 的消息传输：
        - 身份验证时，如果用户名是第一次登录，则进行用户注册
        - 所有的用户名密码直接存储于服务端内存
    > 一个完善的聊天软件还涉及数据库存储技术，以及更多的业务逻辑实现。

# 编程实验 聊天室公聊实现

# 实战预告
- To be continued ...
    思考：
    如何实现客户端之间的私聊模式?
